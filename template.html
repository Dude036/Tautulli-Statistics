<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" ontent="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

</head>
<body>
<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
	<div class="container-fluid">
		<span class="navbar-brand" href="#">
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0, 0, 512, 512">
					<rect width="512" height="512" rx="15%" fill="#282a2d"/>
					<path d="M256 70 H148 l108 186-108 186h108l108-186z" fill="#e5a00d"/>
				</svg>
		</span>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				<li class="nav-item">
					<a class="nav-link" href="#server-stats">Server's Statistics</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#user-stats">{% user_name %}'s Statistics</a>
				</li>
			</ul>
		</div>
	</div>
</nav>

<div class="container my-5">
	<h1>Your Plex Experience in 2024</h1>
	<div class="col-lg-10 px-0">
		<p class="fs-5">
			Firstly, I wanted to express my deepest gratitude for utilizing my Plex server.
			I've spent countless hours searching, retrieving, and organizing the media on this server.
			It makes my heart proud that I get to share all of this effort with you.
		</p>

		<p class="fs-4">Without further ado, here are this years statistics!</p>

	</div>
	<div class="container">
		<hr class="col-1 my-4">
		<div class="row">
			<div class="col-6">
				<h2 id="server-stats">Server Wide Statistics</h2>
				<h3>General Statistics</h3>
				<table class="table table-striped">
					<tbody>
					<tr>
						<th scope="row">Total Storage Size</th>
						<td>80 TB</td>
					</tr>
					<tr>
						<th scope="row">Storage Capacity Added this year</th>
						<td>32 TB</td>
					</tr>
					<tr>
						<th scope="row">Movies added this year</th>
						<td>{% total_movies_added_count %}</td>
					</tr>
					<tr>
						<th scope="row">TV Shows added this year</th>
						<td>{% total_tv_show_added_count %}</td>
					</tr>
					<tr>
						<th scope="row">TV Episodes added this year</th>
						<td>{% total_tv_episode_added_count %}</td>
					</tr>
					<tr>
						<th scope="row">Music Albums added this year</th>
						<td>{% total_music_album_added_count %}</td>
					</tr>
					<tr>
						<th scope="row">Music Tracks added this year</th>
						<td>{% total_music_track_added_count %}</td>
					</tr>
					<tr>
						<th scope="row">Total Data Streamed (in Gb)</th>
						<td>{% total_bandwidth_used %}</td>
					</tr>
					</tbody>
				</table>
			</div>
			<div class="col-4">
				<figure class="figure">
					<canvas id="addedStorage" style="width:100%;max-width:700px"></canvas>
				</figure>
			</div>
		</div>

		<hr class="col-1 my-4">

		<div class="row">
			<div class="col-10">
				<h4>Total Bandwidth Used by Media Type</h4>
				<p>
					For comparison; The distance between the sun and the earth is 93 million miles.
					If you were to convert the amount of bytes of data streamed from my Plex server into inches, that would be approximately 97 million miles.
					There are more bytes streamed than there are inches between us and the Sun!
				</p>
				<figure class="figure col-8">
					<canvas id="totalBandwidthUsed" style="width:100%;max-width:700px"></canvas>
				</figure>
			</div>
		</div>

		<hr class="col-1 my-4">

		<div class="row">
			<div class="col-6">
				<h3>Overall Watch Time Statistics</h3>
				<table class="table table-striped">
					<tbody>
					<tr>
						<th scope="row">Total Watch Time</th>
						<td>{% total_watch_time %}</td>
					</tr>
					<tr>
						<th scope="row">Total Active Use Time</th>
						<td>Server was active {% total_active_use_time %}% of the year</td>
					</tr>
					<tr>
						<th scope="row">Total TV Show Watch Time</th>
						<td>{% total_tv_watch_time %}</td>
					</tr>
					<tr>
						<th scope="row">Total Movie Watch Time</th>
						<td>{% total_movie_watch_time %}</td>
					</tr>
					<tr>
						<th scope="row">Total Music Listen Time</th>
						<td>{% total_music_watch_time %}</td>
					</tr>
					</tbody>
				</table>
			</div>
			<div class="col-4">
				<figure class="figure">
					<canvas id="totalWatchTime" style="width:100%;max-width:700px"></canvas>
				</figure>
			</div>
		</div>

		<hr class="col-1 my-4">

		<h3>Top 10 Shows</h3>
		<table class="table table-striped">
			<thead class="thead-dark">
			<tr>
				<th scope="col">Rank</th>
				<th scope="col">Show Name</th>
				<th scope="col">Show Watch Count</th>
			</tr>
			</thead>
			<tbody>
			<tr style="line-height: 60px; min-height: 60px; height: 60px; font-size: xx-large">
				<th scope="row">1</th>
				<td>{% total_top_tv_show_count_1_name %}</td>
				<td>{% total_top_tv_show_count_1_count %}</td>
			</tr>
			<tr style="line-height: 40px; min-height: 40px; height: 40px; font-size: x-large">
				<th scope="row">2</th>
				<td>{% total_top_tv_show_count_2_name %}</td>
				<td>{% total_top_tv_show_count_2_count %}</td>
			</tr>
			<tr style="line-height: 30px; min-height: 30px; height: 30px; font-size: large">
				<th scope="row">3</th>
				<td>{% total_top_tv_show_count_3_name %}</td>
				<td>{% total_top_tv_show_count_3_count %}</td>
			</tr>
			<tr>
				<th scope="row">4</th>
				<td>{% total_top_tv_show_count_4_name %}</td>
				<td>{% total_top_tv_show_count_4_count %}</td>
			</tr>
			<tr>
				<th scope="row">5</th>
				<td>{% total_top_tv_show_count_5_name %}</td>
				<td>{% total_top_tv_show_count_5_count %}</td>
			</tr>
			<tr>
				<th scope="row">6</th>
				<td>{% total_top_tv_show_count_6_name %}</td>
				<td>{% total_top_tv_show_count_6_count %}</td>
			</tr>
			<tr>
				<th scope="row">7</th>
				<td>{% total_top_tv_show_count_7_name %}</td>
				<td>{% total_top_tv_show_count_7_count %}</td>
			</tr>
			<tr>
				<th scope="row">8</th>
				<td>{% total_top_tv_show_count_8_name %}</td>
				<td>{% total_top_tv_show_count_8_count %}</td>
			</tr>
			<tr>
				<th scope="row">9</th>
				<td>{% total_top_tv_show_count_9_name %}</td>
				<td>{% total_top_tv_show_count_9_count %}</td>
			</tr>
			<tr>
				<th scope="row">10</th>
				<td>{% total_top_tv_show_count_10_name %}</td>
				<td>{% total_top_tv_show_count_10_count %}</td>
			</tr>
			</tbody>
		</table>

		<hr class="col-1 my-4">

		<h3>Top 10 Ways to Watch Plex</h3>

		<div style="height: 300px; width: 100%">
			<canvas id="totalTopPlatform"></canvas>
		</div>
	</div>

	<hr class="col-1 my-4">

	<div class="col-lg-8 px-0" style="margin-bottom: 40px">
		<h2 id="user-stats">{% user_name %}'s Statistics</h2>
		<p>
			This section is just for you. These statistics represent your personal data, and your data alone.
			If you are interested in a specific data point to add to next year's edition of this, please reach out to me!
		</p>

		{% personal_note %}

	<div class="col-lg-8 px-0">
		<h3>{% user_name %} General Statistics</h3>
	</div>

	<p>
		<b>Total Bandwidth Used:</b> {% user_bandwidth_used %} Gb
	</p>
	<div class="progress-stacked" style="height: 30px">
		<div class="progress" role="progressbar" aria-label="Your Usage" aria-valuenow="{% user_bandwidth_used_percentage %}" aria-valuemin="0" aria-valuemax="100" style="height: 30px; width: {% user_bandwidth_used_percentage %}%">
			<div class="progress-bar">Your Usage</div>
		</div>
	</div>

	<hr class="col-1 my-4">

	<div class="col-lg-8 px-0">
		<h3>{% user_name %} Watch Statistics</h3>
	</div>
	<div class="row">
		<div class="col-6">
			<h3>Overall Watch Time Statistics</h3>
			<table class="table table-striped">
				<tbody>
				<tr>
					<th scope="row">Total Watch Time</th>
					<td>{% user_watch_time %}</td>
				</tr>
				<tr>
					<th scope="row">Total TV Show Watch Time</th>
					<td>{% user_tv_watch_time %}</td>
				</tr>
				<tr>
					<th scope="row">Total Movie Watch Time</th>
					<td>{% user_movie_watch_time %}</td>
				</tr>
				<tr>
					<th scope="row">Total Music Listen Time</th>
					<td>{% user_music_watch_time %}</td>
				</tr>
				</tbody>
			</table>
		</div>
		<div class="col-4">
			<figure class="figure">
				<canvas id="userWatchTime" style="width:100%;max-width:700px"></canvas>
			</figure>
		</div>
	</div>

	<h3>{% user_name %}'s Top 10 Shows</h3>
	<table class="table table-striped">
		<thead class="thead-dark">
		<tr>
			<th scope="col">Rank</th>
			<th scope="col">Show Name</th>
			<th scope="col">Show Watch Count</th>
		</tr>
		</thead>
		<tbody>
		<tr style="line-height: 60px; min-height: 60px; height: 60px; font-size: xx-large">
			<th scope="row">1</th>
			<td>{% user_top_tv_show_count_1_name %}</td>
			<td>{% user_top_tv_show_count_1_count %}</td>
		</tr>
		<tr style="line-height: 40px; min-height: 40px; height: 40px; font-size: x-large">
			<th scope="row">2</th>
			<td>{% user_top_tv_show_count_2_name %}</td>
			<td>{% user_top_tv_show_count_2_count %}</td>
		</tr>
		<tr style="line-height: 30px; min-height: 30px; height: 30px; font-size: large">
			<th scope="row">3</th>
			<td>{% user_top_tv_show_count_3_name %}</td>
			<td>{% user_top_tv_show_count_3_count %}</td>
		</tr>
		<tr>
			<th scope="row">4</th>
			<td>{% user_top_tv_show_count_4_name %}</td>
			<td>{% user_top_tv_show_count_4_count %}</td>
		</tr>
		<tr>
			<th scope="row">5</th>
			<td>{% user_top_tv_show_count_5_name %}</td>
			<td>{% user_top_tv_show_count_5_count %}</td>
		</tr>
		<tr>
			<th scope="row">6</th>
			<td>{% user_top_tv_show_count_6_name %}</td>
			<td>{% user_top_tv_show_count_6_count %}</td>
		</tr>
		<tr>
			<th scope="row">7</th>
			<td>{% user_top_tv_show_count_7_name %}</td>
			<td>{% user_top_tv_show_count_7_count %}</td>
		</tr>
		<tr>
			<th scope="row">8</th>
			<td>{% user_top_tv_show_count_8_name %}</td>
			<td>{% user_top_tv_show_count_8_count %}</td>
		</tr>
		<tr>
			<th scope="row">9</th>
			<td>{% user_top_tv_show_count_9_name %}</td>
			<td>{% user_top_tv_show_count_9_count %}</td>
		</tr>
		<tr>
			<th scope="row">10</th>
			<td>{% user_top_tv_show_count_10_name %}</td>
			<td>{% user_top_tv_show_count_10_count %}</td>
		</tr>
		</tbody>
	</table>
</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script>
		// Charts built dynamically
		new Chart("addedStorage", {
			type: "pie",
			data: {
				labels: ["2024", "2023", "2022", "2021", "2020"],
				datasets: [{
					backgroundColor: ['aquamarine', 'cornflowerblue', 'darkred', 'blueviolet', 'forestgreen'],
					data: ["32", "16", "16", "8", "8"]
				}]
			},
			options: {
				title: {
					display: true,
					text: "Plex Storage Additions by Year in Terabytes"
				}
			}
		});

		new Chart("totalBandwidthUsed", {
			type: "pie",
			data: {
				labels: ["TV Streamed", "Movie Watch Time", "Music Listen Time"],
				datasets: [{
					backgroundColor: ['darkred', 'blueviolet', 'forestgreen'],
					data: ["{% total_tv_bandwidth_used %}", "{% total_movie_bandwidth_used %}", "{% total_music_bandwidth_used %}"]
				}]
			},
			options: {
				title: {
					display: true,
					text: "Total Bandwidth used by Media Type in GB"
				}
			}
		});

		new Chart("userBandwidthUsed", {
			type: "pie",
			data: {
				labels: ["TV Streamed", "Movie Watch Time", "Music Listen Time"],
				datasets: [{
					backgroundColor: ['cornflowerblue', 'darkred', 'blueviolet'],
					data: ["{% user_tv_bandwidth_used %}", "{% user_movie_bandwidth_used %}", "{% user_music_bandwidth_used %}"]
				}]
			},
			options: {
				title: {
					display: true,
					text: "{% user_name %}'s Bandwidth used by Media Type in GB"
				}
			}
		});

		new Chart("totalWatchTime", {
			type: "pie",
			data: {
				labels: ["TV Show Watch Time", "Movie Watch Time", "Music Listen Time"],
				datasets: [{
					backgroundColor: ['aquamarine', 'cornflowerblue', 'darkred'],
					data: ["{% total_tv_watch_time_minutes %}", "{% total_movie_watch_time_minutes %}", "{% total_music_watch_time_minutes %}"]
				}]
			},
			options: {
				title: {
					display: true,
					text: "Total Watch Time by Media Type in Minutes"
				}
			}
		});

		new Chart("userWatchTime", {
			type: "pie",
			data: {
				labels: ["TV Show Watch Time", "Movie Watch Time", "Music Listen Time"],
				datasets: [{
					backgroundColor: ['khaki', 'aquamarine', 'cornflowerblue'],
					data: ["{% user_tv_watch_time_minutes %}", "{% user_movie_watch_time_minutes %}", "{% user_music_watch_time_minutes %}"]
				}]
			},
			options: {
				title: {
					display: true,
					text: "{% user_name %}'s Watch Time by Media Type in Minutes"
				}
			}
		});


		let totalPlatformData = {
			labels: [
				"{% total_top_platform_count_1_name %}",
				"{% total_top_platform_count_2_name %}",
				"{% total_top_platform_count_3_name %}",
				"{% total_top_platform_count_4_name %}",
				"{% total_top_platform_count_5_name %}",
				"{% total_top_platform_count_6_name %}",
				"{% total_top_platform_count_7_name %}",
				"{% total_top_platform_count_8_name %}",
				"{% total_top_platform_count_9_name %}",
				"{% total_top_platform_count_10_name %}"
			],
			datasets: [{
				label: 'Total Usage Count by Platform',
				backgroundColor: [
					'rgba(255, 99, 132, 0.2)',
					'rgba(255, 159, 64, 0.2)',
					'rgba(255, 205, 86, 0.2)',
					'rgba(75, 192, 192, 0.2)',
					'rgba(54, 162, 235, 0.2)',
					'rgba(153, 102, 255, 0.2)',
					'rgba(196, 214, 96, 0.2)',
					'rgba(151, 75, 27, 0.2)',
					'rgba(174, 159, 205, 0.2)',
					'rgba(201, 203, 207, 0.2)'
				],
				borderColor: [
					'rgb(255, 99, 132)',
					'rgb(255, 159, 64)',
					'rgb(255, 205, 86)',
					'rgb(75, 192, 192)',
					'rgb(54, 162, 235)',
					'rgb(153, 102, 255)',
					'rgb(196, 214, 96)',
					'rgb(151, 75, 27)',
					'rgb(174, 159, 205)',
					'rgb(201, 203, 207)'
				],
				borderWidth: 1,
				data: [
					{% total_top_platform_count_1_count %},
					{% total_top_platform_count_2_count %},
					{% total_top_platform_count_3_count %},
					{% total_top_platform_count_4_count %},
					{% total_top_platform_count_5_count %},
					{% total_top_platform_count_6_count %},
					{% total_top_platform_count_7_count %},
					{% total_top_platform_count_8_count %},
					{% total_top_platform_count_9_count %},
					{% total_top_platform_count_10_count %}
				]
			}]
		}

		let totalPlatformOptions = {
			title: {
				text: "Total Usage by Platform"
			},
			scales: {
				y: {
					beginAtZero: true
				}
			},
			responsive: true,
			maintainAspectRatio: false
		}

		new Chart("totalTopPlatform", {
			type: 'bar',
			data: totalPlatformData,
			options: totalPlatformOptions
		})
	</script>
</body>
</html>